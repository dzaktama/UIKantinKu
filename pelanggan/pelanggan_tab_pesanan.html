<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesanan Saya - KantinKu</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>

    <style>
        .content { padding-top: 16px; padding-bottom: 16px; }
        #aktif .unified-order-card { margin-bottom: 0; }
        #aktif .unified-header { padding: 12px 20px; }
        #aktif .unified-header .info h4 { font-size: 17px; }
        #aktif .unified-header .info p { font-size: 13px; }
        #aktif .unified-body { padding: 18px 20px; }
        #aktif .estimasi-block { margin-bottom: 18px; }
        #aktif .estimasi-block h2 { font-size: 30px; }
        #aktif .rich-tracker li { padding-bottom: 20px; font-size: 13.5px; }
        #aktif .rich-tracker li strong { font-weight: 700; }
        #aktif .rich-tracker li span { font-size: 11.5px; margin-top: 1px; }
        #aktif .unified-footer { padding: 12px 20px; }
        #aktif .unified-footer p { font-size: 11px; }
        #aktif .unified-footer .help-button { font-size: 13px; padding: 6px 10px; }
    </style>
</head>
<body>

    <div class="mobile-screen">
        <div class="header" style="text-align: left;">
            Pesanan Saya
        </div>
        
        <div class="tab-container">
            <a href="javascript:void(0)" class="tab-item active" onclick="showTab(event, 'aktif')" id="tab-aktif">Pesanan Aktif</a>
            <a href="javascript:void(0)" class="tab-item" onclick="showTab(event, 'riwayat')" id="tab-riwayat">Riwayat</a>
        </div>
        
        <div class="content">
            
            <div id="aktif" class="content-block">
                <div class="unified-order-card">
                    <div class="unified-header">
                        <div class="info">
                            <h4>Kantin Bu Martin</h4>
                            <p>Lihat detail pesanan</p>
                        </div>
                        <a class="toggle-detail" onclick="toggleDetails(this)">Lihat</a>
                    </div>
                    <div id="orderDetails" class="hidden">
                        <div class="order-item-list">
                            <div class="order-item-row">
                                <div class="item-name"><span class="item-qty">1x</span><h5>Nasi Rames Ayam</h5></div>
                                <span class="item-price">Rp 12.000</span>
                            </div>
                            <div class="order-item-row">
                                <div class="item-name"><span class="item-qty">1x</span><h5>Es Teh Manis</h5></div>
                                <span class="item-price">Rp 3.000</span>
                            </div>
                        </div>
                        <div class="order-summary-block">
                            <div class="summary-row"><span>Subtotal</span><span>Rp 15.000</span></div>
                            <div class="summary-row"><span>Biaya Layanan</span><span>Rp 1.000</span></div>
                            <div class="summary-total"><span>Total</span><span>Rp 16.000</span></div>
                        </div>
                    </div>
                    <div class="unified-body">
                        <div class="estimasi-block">
                            <p>Estimasi Siap Diambil</p>
                            <h2>10:30</h2>
                        </div>
                        <ol class="rich-tracker">
                            <li class="completed"><strong>Pesanan Dikonfirmasi</strong><span>10:15 - Kantin Bu Martin</span></li>
                            <li class="active"><strong>Pesanan Dimasak</strong><span>Pedagang sedang menyiapkan pesananmu.</span></li>
                            <li><strong>Siap Diambil</strong><span>Silakan ambil di Kantin Bu Martin.</span></li>
                        </ol>
                    </div>
                    <div class="unified-footer">
                        <p>ID Pesanan: #12345ABC</p>
                        <a href="#" class="help-button">Butuh Bantuan?</a>
                    </div>
                </div>
            </div>
            
            <div id="riwayat" class="content-block hidden">
                
                <div class="order-card">
                    <div class="order-card-header">
                        <h4>Kantin Dzaky</h4>
                        <span class="status-badge status-success">SELESAI</span>
                    </div>
                    <div class="order-card-body">
                        <p style="font-weight: 500; color: var(--light-text); margin-bottom: 8px;">
                            <i class="fas fa-calendar-alt"></i> 07 Nov 2025, 10:35
                        </p>
                        <p class="items">1 items: Mie Ayam Bakso</p>
                    </div>
                    <div class="order-card-footer">
                        <div class="total-price-history">
                            <p>Total</p>
                            <h4>Rp 15.000</h4>
                        </div>
                        <div class="button-group">
                            <a href="pelanggan_beri_rating.html" class="button secondary">Beri Rating</a>
                            <a href="pelanggan_detail_warung.html" class="button">Pesan Lagi</a>
                        </div>
                    </div>
                </div>
                
                <div class="order-card">
                    <div class="order-card-header">
                        <h4>Kantin Bu Martin</h4>
                        <span class="status-badge status-success">SELESAI</span>
                    </div>
                    <div class="order-card-body">
                        <p style="font-weight: 500; color: var(--light-text); margin-bottom: 8px;">
                            <i class="fas fa-calendar-alt"></i> 06 Nov 2025, 12:05
                        </p>
                        <p class="items">2 items: Nasi Rames Ayam, Es Teh Manis</p>
                    </div>
                    <div class="order-card-footer">
                        <div class="total-price-history">
                            <p>Total</p>
                            <h4>Rp 16.000</h4>
                        </div>
                        <div class="button-group">
                            <a href="pelanggan_beri_rating.html" class="button secondary">Beri Rating</a>
                            <a href="pelanggan_detail_warung.html" class="button">Pesan Lagi</a>
                        </div>
                    </div>
                </div>

                <div class="order-card">
                    <div class="order-card-header">
                        <h4>Kantin Ardan</h4>
                        <span class="status-badge status-success">SELESAI</span>
                    </div>
                     <div class="order-card-body">
                        <p style="font-weight: 500; color: var(--light-text); margin-bottom: 8px;">
                            <i class="fas fa-calendar-alt"></i> 05 Nov 2025, 14:30
                        </p>
                        <p class="items">1 items: Jus Alpukat</p>
                    </div>
                    <div class="order-card-footer">
                        <div class="total-price-history">
                            <p>Total</p>
                            <h4>Rp 8.000</h4>
                        </div>
                        <div class="button-group">
                            <a href="pelanggan_beri_rating.html" class="button secondary">Beri Rating</a>
                            <a href="pelanggan_detail_warung.html" class="button">Pesan Lagi</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        
        <div class="navbar">
            <a href="pelanggan_halaman_utama.html" class="nav-item">
                <div class="icon"><i class="fas fa-home"></i></div>
                <div>Home</div>
            </a>
            <a href="pelanggan_tab_pesanan.html" class="nav-item active">
                <div class="icon"><i class="fas fa-receipt"></i></div>
                <div>Pesanan</div>
            </a>
            <a href="pelanggan_tab_profil.html" class="nav-item">
                <div class="icon"><i class="fas fa-user"></i></div>
                <div>Profil</div>
            </a>
        </div>
    </div>

    <script>
        function showTab(event, tabId) {
            var contentBlocks = document.querySelectorAll('.content-block');
            contentBlocks.forEach(function(block) {
                block.classList.add('hidden');
            });

            var tabItems = document.querySelectorAll('.tab-item');
            tabItems.forEach(function(tab) {
                tab.classList.remove('active');
            });

            document.getElementById(tabId).classList.remove('hidden');
            
            // Cek jika event berasal dari klik (bukan null)
            if (event) {
                event.currentTarget.classList.add('active');
            } else {
                // Jika event null (dipanggil oleh script), cari tab berdasarkan tabId
                document.getElementById('tab-' + tabId).classList.add('active');
            }
        }

        function toggleDetails(button) {
            var details = document.getElementById('orderDetails');
            if (details.classList.contains('hidden')) {
                details.classList.remove('hidden');
                button.textContent = 'Tutup';
            } else {
                details.classList.add('hidden');
                button.textContent = 'Lihat';
            }
        }

        /*
            MODIFIKASI BARU:
            Script ini mengecek hash di URL saat halaman dimuat.
            Jika URL-nya adalah "....html#riwayat",
            maka akan otomatis mengklik tab Riwayat.
        */
        window.onload = function() {
            if (window.location.hash === '#riwayat') {
                // Panggil showTab tanpa event (null) dan dengan ID 'riwayat'
                showTab(null, 'riwayat');
            }
        };
    </script>
</body>
</html>